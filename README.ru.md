﻿:globe_with_meridians:  [english](README.md)  |   [český](README.cz.md)	|   **<u>русский</u>**

# План-ет-а Б (PWA игра) 🪐

## Содержание:
* [Описание](#Описание)
* [Инструкции](#Инструкции)
  * [Как играть онлайн?](#Как-играть-онлайн?)
  * [Как запустить локально?](#Как-запустить-локально?)
  * [Как собрать?](#Как-собрать?)
* [Список будущих дел](#Список-будущих-дел)
* [Лицензии](#Лицензии)
* [Релизы](#Релизы)
* [Технические данные](#Технические-данные)

![Скриншот](preview.gif)

## Описание

В этой ветке вы найдете **обновленную** версию моей **награждённой заявки** в **официальном, двухдневном, международном хакатоне Сообщества Flutter** под названием "***#Hack20***".

> **Внимание:**  В соседней ветке находится оригинальная версия заявки.

 В хакатоне фигурировало более чем **2665 участников, 650 команд**, с 266 проектами. Написание кода было регулировано правилами хакатона, список остальных победителей а так же больше о правилах, на английском языке, вы можете посмотреть, на официальном веб сайте: [flutterhackathon.com](https://flutterhackathon.com)

#### Темы Официального хакатон Сообщества Flutter в 2020 году:

* 🌎 **Спасение планеты** (Экология / Что мы узнали во время пандемии)

* 👾 **Ретро / Киберпанк Будущее**

Я решил работать над обеими темами и сделал простую **псевдо-3D игру, напоминающую Wing Commander (1990г.). С интерфейсом в стиле Киберпанк / Железный человек, тематической музыкой и аудио эффектами. Вы можете играть в неё прямо в вашем интернет-браузере или установить на устройство для автономного использования, так как это это прогрессивное веб-приложение (PWA)**. Основное ядро этой игры было сделано в [Rive](https://rive.app) (бывшее Flare).
> **Примечание:** дизайн не зависит от размера экрана, так как вся графика тут векторная (не растровая), но я создавал её с учетом размера экрана примерно в 7-12'.

Ваша миссия состоит в том, чтобы, **пролетая в космосе, искать так называемую "Планету Б" и определить пригодность этой планеты для жизни (щелчком мыши). Тут примерно дюжина планет, которые нужно проверить, но у вас мало топлива** (для полутора минутного полёта). В конце миссии вы можете увидеть количество просканированных планет и запустить игру снова.

> **Примечание:** Игра была создана в течение двух дней одним человеком. В ней нет сложной игровой механики, это просто концепция с приятным антуражем, которая может кого-то вдохновить.

Вы можете посмотреть **предварительное видео (с указанием основных функций), на английском тут:**

**[Геймплей на YouTube](https://youtu.be/_hoEp9jGoLc)**

<details>
  <summary>Спойлер о геймплее</summary>

В игре нет никакой Планеты Б (пригодной для жизни). И это главный смысл этой игры и её философская часть, связанная с темой "Экология"... **Нам придётся позаботиться о Земле, которая у нас есть.**

</details>

## Инструкции

### Как играть онлайн?

---

:warning: **Важно! ПРЕЖДЕ ЧЕМ НАЧАТЬ!**


Этот проект в виде прогрессивного веб-приложения **будет работать только в новейших интернет-браузерах, с движком Chromium (Chrome, Edge и т.д.) версии 83 или более новым. Кроме того, я протестировал его на Firefox версии 77+**, так что, возможно, игра запустится и там. Даже не пытайтесь запустить его на Safari, Internet Explorer и так далее - они не справятся с анимациями полёта!

---
:information_source: Будет запущена новая версия, для просмотра оригинальной игры просто соберите проект из этой ветки локально.

Благодаря [Codemagic](https://codemagic.io), можно просто перейти по этой ссылке и запустить игру в вашем современном браузере:

[https://hack20.codemagic.app](https://hack20.codemagic.app)

### Как запустить локально?
Для этого, просто введите следующие команды в терминале:
````markdown
flutter channel master
flutter upgrade
git clone https://github.com/tsinis/plan_et_b.git
cd plan_et_b
flutter run -d chrome --release --dart-define=FLUTTER_WEB_USE_SKIA=true --dart-define=FLUTTER_WEB_USE_EXPERIMENTAL_CANVAS_TEXT=true
````

:exclamation: Последняя строчка - самая важная! **Пожалуйста, используйте эти метки**.
В противном случае анимации Rive будут отображаться некорректно.

### Как собрать?

Для этого, просто введите следующие команды, из папки проекта в терминале:

* Для Веба:
```
flutter build web --release --dart-define=FLUTTER_WEB_USE_SKIA=true --dart-define=FLUTTER_WEB_USE_EXPERIMENTAL_CANVAS_TEXT=true
```

* Для Андроид:
```
flutter build apk --split-per-abi
```

*К сожалению, другие устройства (такие как PC и Mac) не будут иметь ни звука, ни музыки, потому что я не нашел для этого хорошего плагина). Вы можете собрать игру для этих платформ без ошибок компиляции только после удаления из кода пакета аудио-плеера. Я работаю над этой проблемой (см. Список дел, ниже).*

 В любом случае, эта игра была сделана как прогрессивное веб-приложение, так что нет особых причин иметь нативное приложение, так как вы можете установить игру прямо из браузера, практически на любом современном устройстве.

## Список будущих дел

- [x] Создать игровое ядро.
- [x] Создать псевдо-3D интерфейс.
- [x] Добавить звуки и музыку.
- [ ] Исправить аудио на платформах, отличных от Веб и Андроид.
- [ ] Добавить предысторию и стилизовать меню под киберпанк.
- [ ] Добавить заставку и иконки.

## Лицензии

Этот проект выпущен  в соответствии с условиями [MIT лицензии](./LICENSE). Все ресурсы (звуки, анимации и шрифт) лицензированы согласно лицензиям OFL или CC, и бесплатны для личного пользования. Вы можете найти все эти файлы лицензии **LICENSE**, внутри папок, с полным текстом этой лицензии, на английском языке.

## Релизы

Вы можете найти бинарники (исполняемые файлы), для платформы Андроид и Веб в разделе [Releases](https://github.com/tsinis/plan_et_b/releases) этого репозитория GitHub. Я буду добавлять их постепенно, после того, как исправлю аудио-плеер.

## Технические данные

| Название | Описание |
| ---- | ----------- |
| **Название фреймворка** | [Flutter](https://flutter.dev) |
| Версия фреймворка | [1.20.0-3.0.pre.78](https://github.com/flutter/flutter) |
| Канал фреймворка | мастер |
| **Название языка** | [Dart](https://dart.dev) |
| Версия языка | [2.9.0](https://github.com/dart-lang) |
| Канал языка | бета |
| **Название ИСР** | [Visual Studio Code](https://code.visualstudio.com/insiders/) |
| Версия ИСР | [1.47.0](https://github.com/microsoft/vscode) |
| Канал ИСР | предварительный |
| Название сторонней зависимости | Auto Size Text|
| Пакет сторонней зависимости | [auto_size_text](https://pub.dev/packages/auto_size_text) |
| Версия сторонней зависимости | [any](https://github.com/leisim/auto_size_text) |
| Канал сторонней зависимости | стабильный |
| Название сторонней зависимости | Assets Audio Player |
| Пакет сторонней зависимости | [assets_audio_player](https://pub.dev/packages/assets_audio_player) |
| Версия сторонней зависимости | [any](https://github.com/florent37/Flutter-AudioPlayer) |
| Канал сторонней зависимости | стабильный |
| Название сторонней зависимости | [Rive](https://rive.app) (бывшее Flare) |
| Пакет сторонней зависимости | [flare_flutter](https://pub.dev/packages/flare_flutter) |
| Версия сторонней зависимости | [any](https://github.com/2d-inc/Flare-Flutter) |
| Канал сторонней зависимости | стабильный |
| Архитектура | Vanilla |